<?xml version="1.0" encoding="utf-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN"
  "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <title>Validation</title>
  <link href="../Styles/styles.css" rel="stylesheet" type="text/css" />
</head>

<body>
  <h2 id="validation">Validation</h2>

  <p class="h2subheading">— Making sure your EPUB is Error Free —</p>

  <p>In order to be considered a valid EPUB, your ebook must meet the standards defined for EPUBs. This means it must include certain files and information and not contain any errors as defined by the EPUB specification. To help you check if your EPUB is valid you can use the following tools.</p>

  <h3 class="sigil_not_in_toc">EPUB Validation With FlightCrew</h3>

  <p>Validate your EPUB with FlightCrew by clicking the Validate EPUB with FlightCrew button <img alt="" src="../Images/document-validate_22px.png" />, or selecting the menu item <span class="menuitem">Tools→Validate EPUB With FlightCrew</span>:</p>

  <div class="image"><img alt="validation-flightcrew" src="../Images/validation-flightcrew.png" /></div>

  <p>FlightCrew is included as part of Sigil so it will simply display a new window underneath your editing window listing any issues that it finds. Once you have run Validate to produce a report, look at each of the issues listed and then edit your document to correct them.</p>

  <div class="tip">
    <p class="tiptext">You can double-click on most entries to be taken to the relevant part of the book.</p>
  </div>

  <p>You should validate your document each time you change it to verify there are no more errors.</p>

  <h4 class="sigil_not_in_toc">Common Validation Issues:</h4>

  <div class="tip">
    <p class="tiptext">Note that errors are highlighted in pink, and warnings are highlighted in yellow.</p>
  </div>

  <ul>
    <li>
      <span class="example">This resource is present in the OPF &lt;manifest&gt;, but it’s not reachable (it’s unused).</span>

      <ul>
        <li>This warning means you have included the listed file in your EPUB, but you have not used it anywhere in your book. If you intended to use it, you should link to it, otherwise you can delete the file. Try to search all your files or <span class="example">toc.ncx</span> for the filename – you should leave off the pathname when searching, e.g. if the error is in <span class="example">Text/Chapter1.html</span> then just search for <span class="example">Chapter1.html</span></li>
      </ul>
    </li>

    <li>
      <span class="example">This OPS document is reachable but not present in the OPF &lt;manifest or spine&gt;. "Reachable" means that a reference of some kind that points to this resource exists in the epub.</span>

      <ul>
        <li>This error means you have a reference or a link to a file or image in your EPUB, but that file is not included in the EPUB. You need to add the file to the EPUB or correct the name of the file used in your text. You can usually find these by searching for the filename listed in all the HTML files. You may also have to re-generate or update your TOC.</li>
      </ul>
    </li>

    <li>
      <span class="example">ID value 'SOMEIDNAME' is not unique</span>

      <ul>
        <li>This error means you have an ID named SOMEIDNAME in your EPUB that is defined more than once. Typically these are in headers or footnotes and can be caused by copying and pasting or merging. You can find these by searching all HTML files for the ID name that is listed and changing them so all IDs are different from all other IDs. If the issue is in a heading and you have auto-generated your headings, you can delete the ID and they will be re-generated the next time you create your TOC.</li>
      </ul>
    </li>

    <li>
      <span class="example">attribute 'INVALIDATTRIBUTE' is not declared for element 'SOMEELEMENT'</span>

      <ul>
        <li>This error means you have an HTML tag named SOMEELEMENT that contains an attribute INVALIDATTRIBUTE, but INVALIDATTRIBUTE is not valid for that tag. For instance <span class="example">&lt;h2 invalidattribute="test"&gt;</span>. This can be caused by typos or by old versions of HTML. You need to search for INVALIDATTRIBUTE in all HTML files and remove, correct, or replace each occurrence.</li>
      </ul>
    </li>

    <li>
      <span class="example">no declaration found for element 'INVALIDELEMENT'</span>

      <ul>
        <li>This error means you have an HTML tag named INVALIDELEMENT that has not been defined. Typically this is simply because it is invalid and is old HTML syntax that need updating. You need to search for INVALIDELEMENT in all HTML files and remove, correct, or replace these with valid HTML.</li>
      </ul>
    </li>

    <li>
      <span class="example">element 'INVALIDELEMENT' is not allowed for content model '(p|d|h2|h3|h4|h5|h6|div|ul|ol|...'</span>

      <ul>
        <li>This error means you have an HTML tag named INVALIDELEMENT that is not valid HTML for an EPUB. Typically this is old HTML syntax that needs updating (such as the <span class="example">&lt;center&gt;</span> tag which should be implemented using a style). You need to search for INVALIDELEMENT in all HTML files and remove, correct, or replace each occurrence with valid HTML.</li>
      </ul>
    </li>

    <li>
      <span class="example">value 'SOMENAME' is invalid NCName</span>

      <ul>
        <li>This error means you have an ID name that is invalid. It probably contains a space or other invalid character. You need to search for SOMENAME and change it.</li>
      </ul>
    </li>
  </ul>

  <h3 class="sigil_not_in_toc" id="tidy">CSS Validation With W3C</h3>

  <p>You can also easily validate your CSS Stylesheet files using the W3C website by selecting the menu item <span class="menuitem">Tools→Validate Stylesheets With W3C</span>.</p>

  <p>This will send the contents of all of your stylesheets to the W3C service which will produce reports of any issues.</p>

  <p>You can validate individual stylesheets by right-clicking on the stylesheet in the Book Browser and selecting the validate option.</p>

  <div class="tip">
    <p class="tiptext">Validation is done using CSS 2.1. This is close to but not exactly the version used by EPUB readers – so you should always check your styles on actual ereader devices.</p>
  </div>

  <h3 class="sigil_not_in_toc">EPUB Validation With EpubCheck</h3>

  <p>FlightCrew identifies most issues with EPUBs, but it may not catch everything.</p>

  <p>As an additional check you should also run your EPUB through the EpubCheck program. You can use it online or download a local version of the program:</p>

  <ul>
    <li><a href="http://validator.idpf.org">IDPF EPUB Validator</a></li>
  </ul>

  <h3 class="sigil_not_in_toc">EPUB Validation With Devices</h3>

  <p>And in case you missed it: You should always test your EPUB on as many devices or programs as possible.</p>
</body>
</html>
